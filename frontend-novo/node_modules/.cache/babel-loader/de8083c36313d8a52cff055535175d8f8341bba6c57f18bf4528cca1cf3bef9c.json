{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import'./RegisterVehicle.css';// Importando o CSS\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RegisterVehicle(){const[plate,setPlate]=useState(\"\");const[owner,setOwner]=useState(\"\");const[model,setModel]=useState(\"\");const[color,setColor]=useState(\"\");const[message,setMessage]=useState(\"\");const handleRegister=async e=>{e.preventDefault();const plateRegex=/^[A-Z]{3}-[0-9][A-Z][0-9]{2}$/;if(!plateRegex.test(plate)){setMessage(\"O formato da placa deve ser AAA-0A00.\");return;}if(!owner||!model||!color){setMessage(\"Todos os campos são obrigatórios.\");return;}try{// Verificar se o veículo já está registrado\nconst checkResponse=await axios.get(`http://127.0.0.1:5001/api/check_vehicle/${plate}`);// A resposta deve conter um booleano 'exists'\nif(checkResponse.data&&checkResponse.data.exists){setMessage(\"Esse veículo já está registrado no estacionamento.\");return;}// Registrar o novo veículo\nconst response=await axios.post(\"http://127.0.0.1:5001/api/register_vehicle\",{plate,owner,model,color,entry_time:new Date().toLocaleString()});setMessage(response.data.message);}catch(error){// Diferenciar o erro de verificação de veículo do erro de registro\nif(error.response&&error.response.status===404){setMessage(\"Erro ao verificar a existência do veículo.\");}else{console.error(\"Erro ao registrar veículo:\",error);setMessage(\"Erro ao registrar veículo.\");}}};const handlePlateChange=e=>{const inputValue=e.target.value.toUpperCase();// Converter para maiúsculas\nlet formattedValue=inputValue.replace(/[^A-Z0-9]/g,\"\");// Remover caracteres inválidos\n// Inserir o hífen no quarto caractere se o comprimento for maior que 3\nif(formattedValue.length>3){formattedValue=formattedValue.slice(0,3)+\"-\"+formattedValue.slice(3);}// Limitar o comprimento total a 7 (incluindo o hífen)\nif(formattedValue.length<=8){setPlate(formattedValue);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-vehicle\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registrar Ve\\xEDculo\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleRegister,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Placa (AAA-0A00)\",value:plate,onChange:handlePlateChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Propriet\\xE1rio\",value:owner,onChange:e=>setOwner(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Modelo\",value:model,onChange:e=>setModel(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Cor\",value:color,onChange:e=>setColor(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Registrar\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"message\",children:message})]});}export default RegisterVehicle;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","RegisterVehicle","plate","setPlate","owner","setOwner","model","setModel","color","setColor","message","setMessage","handleRegister","e","preventDefault","plateRegex","test","checkResponse","get","data","exists","response","post","entry_time","Date","toLocaleString","error","status","console","handlePlateChange","inputValue","target","value","toUpperCase","formattedValue","replace","length","slice","className","children","onSubmit","type","placeholder","onChange","required"],"sources":["C:/Users/Juh/OneDrive/Documentos/Estacionamento-App/frontend-novo/src/components/RegisterVehicle.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport './RegisterVehicle.css'; // Importando o CSS\r\n\r\nfunction RegisterVehicle() {\r\n  const [plate, setPlate] = useState(\"\");\r\n  const [owner, setOwner] = useState(\"\");\r\n  const [model, setModel] = useState(\"\");\r\n  const [color, setColor] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const plateRegex = /^[A-Z]{3}-[0-9][A-Z][0-9]{2}$/;\r\n    if (!plateRegex.test(plate)) {\r\n      setMessage(\"O formato da placa deve ser AAA-0A00.\");\r\n      return;\r\n    }\r\n\r\n    if (!owner || !model || !color) {\r\n      setMessage(\"Todos os campos são obrigatórios.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Verificar se o veículo já está registrado\r\n      const checkResponse = await axios.get(`http://127.0.0.1:5001/api/check_vehicle/${plate}`);\r\n      \r\n      // A resposta deve conter um booleano 'exists'\r\n      if (checkResponse.data && checkResponse.data.exists) {\r\n        setMessage(\"Esse veículo já está registrado no estacionamento.\");\r\n        return;\r\n      }\r\n      \r\n      // Registrar o novo veículo\r\n      const response = await axios.post(\"http://127.0.0.1:5001/api/register_vehicle\", {\r\n        plate,\r\n        owner,\r\n        model,\r\n        color,\r\n        entry_time: new Date().toLocaleString(),\r\n      });\r\n\r\n      setMessage(response.data.message);\r\n    } catch (error) {\r\n      // Diferenciar o erro de verificação de veículo do erro de registro\r\n      if (error.response && error.response.status === 404) {\r\n        setMessage(\"Erro ao verificar a existência do veículo.\");\r\n      } else {\r\n        console.error(\"Erro ao registrar veículo:\", error);\r\n        setMessage(\"Erro ao registrar veículo.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePlateChange = (e) => {\r\n    const inputValue = e.target.value.toUpperCase(); // Converter para maiúsculas\r\n    let formattedValue = inputValue.replace(/[^A-Z0-9]/g, \"\"); // Remover caracteres inválidos\r\n\r\n    // Inserir o hífen no quarto caractere se o comprimento for maior que 3\r\n    if (formattedValue.length > 3) {\r\n      formattedValue = formattedValue.slice(0, 3) + \"-\" + formattedValue.slice(3);\r\n    }\r\n\r\n    // Limitar o comprimento total a 7 (incluindo o hífen)\r\n    if (formattedValue.length <= 8) {\r\n      setPlate(formattedValue);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"register-vehicle\">\r\n      <h2>Registrar Veículo</h2>\r\n      <form onSubmit={handleRegister}>\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Placa (AAA-0A00)\" \r\n          value={plate} \r\n          onChange={handlePlateChange} \r\n          required \r\n        />\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Proprietário\" \r\n          value={owner} \r\n          onChange={(e) => setOwner(e.target.value)} \r\n          required \r\n        />\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Modelo\" \r\n          value={model} \r\n          onChange={(e) => setModel(e.target.value)} \r\n          required \r\n        />\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Cor\" \r\n          value={color} \r\n          onChange={(e) => setColor(e.target.value)} \r\n          required \r\n        />\r\n        <button type=\"submit\">Registrar</button>\r\n      </form>\r\n      <p className=\"message\">{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RegisterVehicle;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}